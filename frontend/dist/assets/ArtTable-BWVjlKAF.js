import{c as e,_ as a}from"./index-D1Hg0Vwf.js";/* empty css                   *//* empty css                      *//* empty css                        *//* empty css                    *//* empty css                 */import{d as t,r as l,k as n,c as o,s as r,m as i,t as s,q as g,F as d,u,z as p,v as c,O as h,aH as f,S as y,y as m,p as z,aN as v,x as b,aR as w,aa as x,a_ as S,aS as k,i as B,n as H}from"./vendor-CJD3O2Jl.js";import{T as j}from"./formEnum-BLgiZVxV.js";const T=t("tableStore",(()=>{const e=l(j.DEFAULT),a=l(!1),t=l(!1),n=l(!1);return{tableSize:e,isZebra:a,isBorder:t,isHeaderBackground:n,setTableSize:a=>e.value=a,setIsZebra:e=>a.value=e,setIsBorder:e=>t.value=e,setIsHeaderBackground:e=>n.value=e}}),{persist:{key:"table",storage:localStorage}}),_={class:"table-container"},C=a(n({__name:"ArtTable",props:{data:{default:()=>[]},loading:{type:Boolean,default:!1},rowKey:{default:"id"},border:{type:[Boolean,null],default:null},stripe:{type:[Boolean,null],default:null},index:{type:Boolean,default:!1},height:{default:"100%"},maxHeight:{},showHeader:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!1},emptyText:{default:"暂无数据"},pagination:{type:Boolean,default:!0},total:{default:0},currentPage:{default:1},pageSize:{default:20},pageSizes:{default:()=>[10,20,30,50]},hideOnSinglePage:{type:Boolean,default:!0},paginationAlign:{default:"center"},paginationSize:{default:"default"},paginationLayout:{default:""},showHeaderBackground:{type:[Boolean,null],default:null},marginTop:{default:20},size:{}},emits:["update:currentPage","update:pageSize","row-click","size-change","current-change","selection-change"],setup(a,{expose:t,emit:n}){const{width:j}=e(),C=o((()=>j.value<500)),P=a,R=o((()=>P.paginationLayout?P.paginationLayout:C.value?"prev, pager, next, jumper, sizes, total":"total, sizes, prev, pager, next, jumper")),A=n,E=T(),{tableSize:L}=r(E),I=l();t({expandAll:()=>{const e=I.value;if(!e)return;const a=t=>{t.forEach((t=>{var l;(null==(l=t.children)?void 0:l.length)>0&&(e.toggleRowExpansion(t,!0),a(t.children))}))};a(P.data)},collapseAll:()=>{const e=I.value;if(!e)return;const a=t=>{t.forEach((t=>{var l;(null==(l=t.children)?void 0:l.length)>0&&(e.toggleRowExpansion(t,!1),a(t.children))}))};a(P.data)}});const K=o((()=>P.size||L.value)),O=o((()=>null===P.stripe?E.isZebra:P.stripe)),U=o((()=>null===P.border?E.isBorder:P.border)),Z=o((()=>null===P.showHeaderBackground?E.isHeaderBackground:P.showHeaderBackground)),F=o((()=>{if(!P.pagination||P.total>P.data.length)return P.data;const e=(P.currentPage-1)*P.pageSize,a=e+P.pageSize;return P.data.slice(e,a)})),q=o({get:()=>P.currentPage,set:e=>A("update:currentPage",e)}),D=o({get:()=>P.pageSize,set:e=>A("update:pageSize",e)}),G=(e,a,t)=>{A("row-click",e,a,t)},J=e=>{A("selection-change",e)},N=e=>{A("size-change",e)},W=e=>{A("current-change",e),$()},$=()=>{H((()=>{I.value&&I.value.setScrollTop(0)}))};return(e,a)=>{const t=v,l=w,n=S,o=k,r=f;return s(),i("div",{class:d(["art-table",{"header-background":u(Z)}]),style:g({marginTop:e.marginTop+"px",height:e.total?"calc(100% - 90px)":"calc(100% - 25px)"})},[p("div",_,[h((s(),y(n,{ref_key:"tableRef",ref:I,data:u(F),"row-key":e.rowKey,height:e.height,"max-height":e.maxHeight,"show-header":e.showHeader,"highlight-current-row":e.highlightCurrentRow,size:u(K),stripe:u(O),border:u(U),"header-cell-style":{backgroundColor:u(Z)?"var(--el-fill-color-lighter)":"",fontWeight:"500"},onRowClick:G,onSelectionChange:J},{empty:m((()=>[h(b(l,{description:e.emptyText},null,8,["description"]),[[x,!e.loading]])])),default:m((()=>[e.index&&u(F).length>0?(s(),y(t,{key:0,type:"index",width:"60",label:"序号",align:"center",fixed:"left"})):c("",!0),u(F).length?z(e.$slots,"default",{key:1},void 0,!0):c("",!0)])),_:3},8,["data","row-key","height","max-height","show-header","highlight-current-row","size","stripe","border","header-cell-style"])),[[r,e.loading]])]),e.pagination&&u(F).length>0?(s(),i("div",{key:0,class:d(["table-pagination",e.paginationAlign])},[b(o,{"current-page":u(q),"onUpdate:currentPage":a[0]||(a[0]=e=>B(q)?q.value=e:null),"page-size":u(D),"onUpdate:pageSize":a[1]||(a[1]=e=>B(D)?D.value=e:null),"page-sizes":e.pageSizes,"pager-count":u(C)?5:7,total:e.total,background:!0,size:e.paginationSize,layout:u(R),onSizeChange:N,onCurrentChange:W,"hide-on-single-page":e.hideOnSinglePage},null,8,["current-page","page-size","page-sizes","pager-count","total","size","layout","hide-on-single-page"])],2)):c("",!0)],6)}}}),[["__scopeId","data-v-8de35f7e"]]);export{C as _,T as u};
