var a=(a,t,e)=>new Promise(((o,i)=>{var s=a=>{try{l(e.next(a))}catch(t){i(t)}},r=a=>{try{l(e.throw(a))}catch(t){i(t)}},l=a=>a.done?o(a.value):Promise.resolve(a.value).then(s,r);l((e=e.apply(a,t)).next())}));import{L as t}from"./index-Bqf32_B1.js";import{g as e,i as o}from"./index-D1Hg0Vwf.js";import{u as i}from"./useChart-F0Lo1_yG.js";import{g as s}from"./libraryStatsApi-BRoHMRzv.js";import{k as r,r as l,w as n,e as c,m as u,t as d,aK as m,z as p}from"./vendor-CJD3O2Jl.js";const y={class:"card art-custom-card"},v=r({__name:"BookCategoryChart",setup(r){const{chartRef:v,isDark:x,initChart:h,updateChart:g,getAxisLabelStyle:b,getAxisLineStyle:f,getAxisTickStyle:C,getSplitLineStyle:k}=i(),L=l([]),S=l([]),j=()=>a(this,null,(function*(){const a=yield s();200===a.code&&a.data&&a.data.bookCategoryCount?(S.value=Object.keys(a.data.bookCategoryCount),L.value=Object.values(a.data.bookCategoryCount)):(S.value=[],L.value=[])})),A=()=>a(this,null,(function*(){yield j(),h(w(!0)),g(w(!1))}));n(x,(()=>{h(w())})),c((()=>{A()}));const w=a=>{const i=a||!1;return{animation:!0,animationDuration:0,animationDurationUpdate:0,grid:{left:"2.2%",right:"3%",bottom:"0%",top:"5px",containLabel:!0},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:S.value,axisTick:C(),axisLabel:b(!0),axisLine:f(!0)},yAxis:{type:"value",min:0,max:L.value.reduce(((a,t)=>Math.max(a,t)),0),axisLabel:b(!0),axisLine:f(!x.value),splitLine:k(!0)},series:[{name:"图书数量",color:e("--main-color"),type:"line",stack:"总量",data:i?new Array(S.value.length).fill(0):L.value,smooth:!0,symbol:"none",lineStyle:{width:2.2},areaStyle:{color:new t(0,0,0,1,[{offset:0,color:o(e("--el-color-primary"),.15).rgba},{offset:1,color:o(e("--el-color-primary"),.01).rgba}])},animationDuration:0,animationDurationUpdate:1500}]}};return(a,t)=>(d(),u("div",y,[t[0]||(t[0]=m('<div class="card-header"><div class="title"><h3 class="box-title">图书分类统计</h3><p class="subtitle">本月新增<span class="text-success">+125册</span></p></div></div>',1)),p("div",{class:"chart",ref_key:"chartRef",ref:v},null,512)]))}});export{v as _};
